$(function(){let e=$(".app-gallery .messages"),t=$(".app-gallery .add-gallery-form"),i=(t.find("#imgTitle"),t.find("#imgFile")),n=t.find("#addGallerySubmit");function l(t,i,n=null){return null!=n?e.html(`\n                <div class='alert alert-${t}'>${i}</div>\n            `):e.html(""),!0}function s(){$("body").css("overflow","auto"),$(".full-img-details").fadeOut("slow",function(){$(this).html("")})}function a(){$.ajax({url:"upload.php",method:"POST",data:{fetchAllImages:1},chache:!1,success:function(e){$(".cssloader").slideUp("slow",function(){$(this).remove()}),$(".app-gallery-body-inner").html(e)}})}a(),i.on("change",function(){let e=$(this).val().split(".").pop().toLowerCase(),i=["jpg","jpeg","png"];if(i.includes(e)){let e=4096;Math.round(this.files[0].size/1024)<=e?(n.prop("disabled",!1),n.removeClass("no-active"),t.find(".file-inp-label").html(this.files[0].name),l("success","the image upload success")):(n.prop("disabled",!0),n.addClass("no-active"),l("danger",`the image size must be less than ${e} KB`,!0))}else n.prop("disabled",!0),n.addClass("no-active"),l("danger",`the image type not supported! only ${i.join(", ")}`,!0)}),t.on("submit",function(t){let i=$(this);t.preventDefault();const n=new FormData(this);n.append("uploadImg",!0),$.ajax({url:"upload.php",method:"POST",data:n,cache:!1,contentType:!1,processData:!1,success:function(t,n,l){e.html(t),i[0].reset(),a()}})}),$(document).on("click",".img-item-details",function(){let e=$(this).data("id"),t=$(this).parent().find("img").attr("src"),i=$(this).find(".img-item-details-title").text(),n=$(this).find(".img-item-details-date").text();$("body").css("overflow","hidden"),$(".full-img-details").html(`\n        \n            <div class='full-img-details-box padding-sec'>\n                <div class='container'>\n                    <div class='de position-relative'>\n                        <h4 class='full-img-details-box-title'>${i}</h4>\n                        <h6 class='full-img-details-box-date m-0'>uploaded at: ${n}</h6>\n                        <button class='my-btn full-img-details-box-close'>\n                            <ion-icon class='the-icon' name='close-outline'></ion-icon>\n                        </button>\n                    </div>\n                    <div class='img'>\n                        <img src='${t}' class='img-fluid' alt="${i}">\n                    </div>\n                    <div class='de-actions'>\n                        <button type='button' class='my-btn' data-id='${e}'><ion-icon name='trash-outline' class='the-icon'></ion-icon>delete</button>\n                    </div>\n                </div>\n            </div>\n\n        `).fadeIn("slow")}),$(document).on("click",".full-img-details-box-close",function(){s()}),$(document).on("click",".full-img-details .de-actions .my-btn",function(){$(this);let e=$(this).data("id");swal({title:"Are you sure?",text:"Once deleted, you will not be able to recover this imaginary file!",icon:"warning",buttons:!0,dangerMode:!0}).then(t=>{t&&$.ajax({url:"upload.php",method:"POST",data:{deleteImg:1,imgId:e},chache:!1,success:function(e){swal("Poof! Your imaginary file has been deleted!",{icon:"success"}).then(e=>{s(),a()})}})})})});